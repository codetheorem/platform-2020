// tests for get_event
// Generated by serverless-jest-plugin

const mod = require('../handler');

const jestPlugin = require('serverless-jest-plugin');

const { lambdaWrapper } = jestPlugin;
const adder = lambdaWrapper.wrap(mod, { handler: 'add_event' });
const wrapped = lambdaWrapper.wrap(mod, { handler: 'get_event' });
const AWS = require('aws-sdk');

const insert_event = {
  body: JSON.stringify({
    category: 'main',
    description: 'Get this event',
    event_name: "hugo's awesome workshop",
  }),
};

describe('get_event', () => {
  beforeAll((done) => {
    done();
  });

  it('Correctly retrieves the event from the database', async () => {
    const added = await adder.run(insert_event);
    const event = {
      queryStringParameters: JSON.stringify({ id: added.body.id }),
    };
    return wrapped.run(event).then((response) => {
      expect(response).toBeDefined();
      expect(response).toMatchObject({ body: {}, statusCode: 200 });
    });
  });
});
