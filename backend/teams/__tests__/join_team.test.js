'use strict';

// tests for create_team
// Generated by serverless-jest-plugin

const mod = require('./../handler');

const jestPlugin = require('serverless-jest-plugin');
const lambdaWrapper = jestPlugin.lambdaWrapper;
const wrapped = lambdaWrapper.wrap(mod, { handler: 'create_team' });

const AWS = require('aws-sdk-mock');

const sample_membership = {
    "team_id": "12jj32k42-sdfjk32",
    "user_id": "2j3kjfd9sfjdsk-23"
}


describe('join_team', () => {
  beforeAll((done) => {
    done();
  });

  it('Correctly inserts the membership into the database', () => {
    const bodyStub = sample_membership;
    AWS.mock('DynamoDB', 'putItem', function(params, callback) {
      callback(null, {Item: sample_membership});
    });

    const membership = {
      body: JSON.stringify(bodyStub)
    };
    return wrapped.run(membership).then((response) => {
      expect(response).toBeDefined();
      expect(response).toMatchObject({body: JSON.stringify(sample_membership), statusCode: 200})
    });
  });

});
